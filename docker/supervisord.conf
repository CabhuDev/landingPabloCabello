# Configuraci√≥n de Supervisor para Pablo Cabello
# Maneja nginx y FastAPI

[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/log/supervisor/supervisord.pid

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/nginx_stdout.log
stderr_logfile=/var/log/supervisor/nginx_stderr.log
user=root

[program:fastapi]
command=/usr/local/bin/python3.11 -m uvicorn app.main:app --host 0.0.0.0 --port 8000
directory=/app/backend
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/fastapi_stdout.log
stderr_logfile=/var/log/supervisor/fastapi_stderr.log
user=appuser
environment=PATH="/home/appuser/.local/bin:%(ENV_PATH)s",PYTHONPATH="/app/backend:/home/appuser/.local/lib/python3.11/site-packages"
